# 版本变更记录 | CHANGELOG

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.5.7] - 2026-02-20

### 优化 (Improved)
- 🎨 **UI布局优化**:
  - 简化添加/收起按钮为上下箭头图标(▲/▼)，缩小宽度至50px
  - 统计区域改用flex布局，左侧5个统计卡片平分空间，按钮右对齐
  - 统一搜索框、任务输入框、属性配置组高度为36px（统计卡片保持44px）
  - 统一所有输入框字体大小为0.85rem
- 🎨 **表单区域紧凑化**:
  - 删除属性配置组图标(📅🏷️⚡)，简化界面
  - 调整属性选择器宽度：日期110px，分类/优先级42px
  - 缩小属性组内边距至0.5rem
  - 实现视觉层次：统计区域44px（两行文字），表单区域36px（一行文字）
- 🎨 **日期显示优化**:
  - 指定日期显示格式从"月/日 时:分"改为"年/月/日 时:分"（如：2026/2/20 13:30）
  - 增加日期选择器宽度以完整显示年月日时分
- 🎨 **筛选功能精简**:
  - 删除高级筛选中分类和优先级的"全部"选项
  - 分类筛选仅保留：工作、学习、生活（3个选项）
  - 优先级筛选仅保留：高、中、低（3个选项）
  - 优化筛选弹窗布局，分类和优先级各占一行

### 技术改进 (Technical)
- 🔧 统一UI尺寸规范：统计卡片44px，表单元素36px
- 🔧 统一字体规范：所有输入框0.85rem
- 🔧 优化CSS布局：从Grid改为Flex实现更灵活的空间分配

---

## [1.4.0] - 2026-02-19

### 新增 (Added)
- ✅ **番茄钟成就系统**:
  - 引入番茄数计算逻辑：高优先级(4🍅)、中优先级(2🍅)、低优先级(1🍅)
  - 净番茄数统计（已获得 - 逾期扣除）
  - 勋章体系：🌱新手、🌟新星、⭐达人、🏆专家、👑大师
  - 近7天任务完成趋势柱状图
  - 连续打卡天数统计与单日最高记录
- ✅ **隐私与安全**:
  - 内置《隐私政策》，明确声明全离线、无数据上传、不收集个人信息
  - 增加数据导出/导入（Excel格式），支持本地备份与迁移
- ✅ **手机号登录系统**:
  - 个人主页支持绑定/解绑手机号
  - 使用LocalNotifications模拟短信验证码
- ✅ **下拉刷新**: 
  - 支持移动端手势刷新数据，增加动画指示器
- ✅ **智能逾期提醒**:
  - 1小时内即将逾期及已逾期提醒，采用幽默话术增强交互感

### 优化 (Improved)
- 🎨 **用户数据隔离**: 任务数据按用户独立存储（`tasks_{username}`）
- 🎨 **个人主页重构**:
  - 布局精简，纵向空间利用率提升30%
  - 用户信息区域头像缩小17%，字体更精简
  - 数据管理区域增加模板下载入口
- 🎨 **联系与支持**: 整合微信/打赏二维码，支持一键联系

### 修复 (Fixed)
- 🐛 **类型校验**: 修复验证码输入框类型不匹配导致验证失败的问题
- 🐛 **兼容性**: 优化 Capacitor 插件与 Java 21 的兼容性配置

---

## [1.3.1] - 2026-02-19

### UI 重构 (UI Overhaul)
- 🎨 **统计区域重组**: 将分类统计（工作/学习/生活）上移至第一行，状态统计（待办/完成/逾期）下移至第二行，符合更直观的层级逻辑。
- 🎨 **统一视觉风格**: 移除环形进度条，将"占比"改为标准统计项（Icon+Count+Label），全站统一扁平化风格。
- 🎨 **动态首字母头像**: 移除 Emoji 头像，改为根据用户名首字母生成的动态渐变头像，提升现代感。
- 🎨 **分类图标化**: 为分类添加专属图标（💼 工作、📚 学习、🏠 生活）。

### 交互优化 (UX Improvements)
- 🔄 **筛选逻辑**: 点击第一行"全部(📋)"按钮重置所有筛选条件。
- 🔄 **分类筛选**: 直接点击第一行分类统计项进行筛选。
- 🔄 **状态筛选**: 点击第二行状态统计项进行筛选。

---

## [1.3.0] - 2026-02-19

### 新增 (Added)
- ✅ **批量导入功能**: 支持从Excel导入任务（任务名称、描述、分类、优先级、类型、状态、创建时间）
- ✅ **下载模板按钮**: 在数据管理区域新增"下载模板"按钮，用户可直接下载官方导入模板
- ✅ **导入模板文件**: 提供包含100条示例任务的官方模板（时间范围：2026-01-01至2026-02-25）
- ✅ **导入结果统计**: 显示导入成功/失败数量
- ✅ **智能数据解析**: 自动解析Excel中的分类、优先级、类型、状态、周期等字段

### 修复 (Fixed)
- 🐛 **修复addTask方法**: 保留导入数据的完整字段（描述、状态、创建时间等），不再强制覆盖
- 🐛 **修复统计逻辑**: 待办统计不再包含已逾期任务，避免重复计数
  - 修改前：待办 = 所有非已完成任务（包含已逾期）
  - 修改后：待办 = 仅pending状态任务

### 文档 (Documentation)
- 📄 新增《导入模板使用说明》文档
- 📄 新增《导入功能总结》文档
- 📄 新增《导入模板格式说明》文档
- 📄 更新README，添加模板下载链接

### 开发工具 (Development)
- 🛠️ 新增清理本地数据脚本 (`scripts/清理本地数据.js`)
- 🛠️ 新增统计任务数据脚本 (`scripts/统计任务数据.js`)

---

## [1.2.1] - 2026-02-18

### 修复 (Fixed)
- 🐛 修复小屏手机上统计数字被截断的问题
- 🐛 优化统计区域字体大小和间距，确保"已完成"和"已逾期"文字完整显示

### 优化 (Changed)
- 🔄 统计图标字体：0.85rem → 0.8rem
- 🔄 统计数字字体：0.95rem → 0.85rem
- 🔄 统计标签字体：0.7rem → 0.65rem
- 🔄 统计区域间距：0.2rem → 0.15rem
- 🔄 统计区域padding：0.25rem 0.4rem → 0.2rem 0.3rem

### 技术细节
- 📱 小步优化原则：仅针对统计数字截断问题进行最小化修改
- 📱 保持其他所有功能和样式不变

---

## [1.2.0] - 2026-02-18

### 新增 (Added)
- ✅ 统计数据垂直排列布局
- ✅ 统计数据图标化（⏳ 待办、✅ 已完成、⚠️ 已逾期）
- ✅ 任务卡片图标化（⚡ 优先级、🏷️ 分类）
- ✅ 剩余时间颜色分级（蓝色/橙色/红色）
- ✅ 剩余时间脉冲动画（警告和紧急状态）

### 优化 (Changed)
- 🔄 统计栏卡片感增强（背景加深、边框加粗、添加阴影）
- 🔄 任务标题字号优化（1.1rem → 1rem）
- 🔄 任务属性间距增加（0.5rem → 0.6rem）
- 🔄 复选框点击热区扩大（44x44px）
- 🔄 删除按钮点击热区扩大（32x32px → 44x44px）
- 🔄 任务卡片触摸反馈（按下缩小效果）
- 🔄 统计数据悬停效果（向右平移）

### 安卓体验优化
- 📱 符合Material Design最小触摸目标（44dp）
- 📱 禁用webkit高亮效果
- 📱 触摸反馈动画
- 📱 视觉平衡优化（字体比例调整）

### 视觉细节
- 🎨 倒计时颜色分级：
  - 正常（>3小时）：蓝色
  - 警告（1-3小时）：橙色 + 2秒脉冲
  - 紧急（<1小时）：红色 + 1秒脉冲
- 🎨 统计数据垂直排列，视觉更紧凑
- 🎨 图标与文字结合，信息密度更高

---

## [1.1.0] - 2026-02-17

### 新增 (Added)
- ✅ 统计数据交互式筛选功能
- ✅ 点击进度圈/待办/已完成/已逾期直接筛选任务
- ✅ 逾期任务筛选功能
- ✅ 胶囊按钮样式的分类筛选
- ✅ 添加表单默认展开

### 优化 (Changed)
- 🔄 统计区域和筛选区域完全融合
- 🔄 统计数据变为可点击的筛选按钮
- 🔄 分类筛选改为胶囊按钮样式
- 🔄 时间选择器紧凑化
- 🔄 添加表单内联显示（不再使用弹窗）
- 🔄 进度圈缩小为50px
- 🔄 统计数据横向排列

### 移除 (Removed)
- ❌ 独立的筛选工具栏区域
- ❌ 底部抽屉弹窗
- ❌ 悬浮添加按钮

### 空间优化
- 📐 顶部统计区域节省约47%空间
- 📐 移除独立筛选区域，节省约60px
- 📐 总计节省约130px垂直空间

---

## [1.0.0] - 2026-02-17

### 新增 (Added)
- ✅ Android离线版APP首次发布
- ✅ 用户注册功能（本地存储）
- ✅ 用户登录功能（本地验证）
- ✅ 任务创建、编辑、删除功能
- ✅ 任务分类（工作、学习、生活）
- ✅ 任务优先级（高、中、低）
- ✅ 任务周期类型（仅今天、每天、自定义每周）
- ✅ 任务详细描述功能
- ✅ 回收站功能（软删除）
- ✅ 任务恢复功能
- ✅ 任务筛选（状态、分类、时间范围）
- ✅ 任务自动排序
- ✅ 今日任务倒计时
- ✅ 逾期任务检测
- ✅ 任务进度统计
- ✅ 移动端全屏优化布局
- ✅ 毛玻璃效果UI
- ✅ 渐变色背景
- ✅ 通知提示系统

### 技术实现 (Technical)
- ✅ 使用 Vue 3 + Composition API
- ✅ 使用 Pinia 状态管理
- ✅ 使用 Vue Router (Hash模式)
- ✅ 使用 Capacitor 8.x 打包Android
- ✅ 使用 Capacitor Preferences API 本地存储
- ✅ 使用 Vite 构建工具
- ✅ 24小时制时间显示
- ✅ 北京时区支持

### 架构变更 (Changed)
- 🔄 从全栈架构迁移至纯前端离线应用
- 🔄 从后端API改为本地Preferences存储
- 🔄 从Web应用改为Android原生应用
- 🔄 路由从History模式改为Hash模式

### 废弃 (Deprecated)
- ⚠️ `/server` 目录中的Node.js后端代码（保留作为历史参考）
- ⚠️ SQLite数据库（已改用Capacitor Preferences）
- ⚠️ Axios HTTP客户端（无需网络请求）
- ⚠️ Element Plus UI组件库（未使用）

### 移除 (Removed)
- ❌ 后端API依赖
- ❌ 网络连接需求
- ❌ 数据库服务器
- ❌ 调试日志面板（正式版）

### 修复 (Fixed)
- 🐛 修复登录后无法跳转问题
- 🐛 修复路由在Capacitor环境下不工作
- 🐛 修复时间显示不是24小时制
- 🐛 修复任务标签样式不统一
- 🐛 修复手机端宽度过宽问题

### 安全 (Security)
- ⚠️ 密码以明文存储在本地（仅适用于个人设备）
- ⚠️ 无网络传输，数据仅存储在本地设备

---

## [未发布] - 计划中的功能

### 计划新增
- 📅 任务提醒通知
- 📅 数据导出/导入功能
- 📅 主题切换（深色模式）
- 📅 任务搜索功能
- 📅 任务标签系统
- 📅 数据备份到云端（可选）
- 📅 密码加密存储
- 📅 生物识别登录

### 计划优化
- 📅 性能优化
- 📅 动画效果优化
- 📅 无障碍访问支持
- 📅 多语言支持

---

## 版本说明

### 版本号格式
- **主版本号 (Major)**: 不兼容的API修改
- **次版本号 (Minor)**: 向下兼容的功能性新增
- **修订号 (Patch)**: 向下兼容的问题修正

### 发布类型
- **[Released]**: 已发布的稳定版本
- **[Beta]**: 测试版本
- **[Alpha]**: 内部测试版本
- **[Unreleased]**: 未发布的开发中功能
